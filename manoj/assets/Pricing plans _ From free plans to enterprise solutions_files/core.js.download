(function(r,v,n,q,l){r[v]=r[v]||{};for(r[v].q=r[v].q||[];l<q.length;)n(q[l++],r[v])})(window,"extole",function(r,v){v[r]=v[r]||function(){v.q.push([r,arguments])}},["log"],0);
extole.define||function(){function r(f){f=l(f);return c[f]}function v(f,m){extole.log("error","[REQUIRE] "+f,m)}function n(f,m){if(f.length)for(var u=0;u<f.length;u++)m(f[u],u);else for(u in f)Object.prototype.hasOwnProperty.call(f,u)&&m(f[u],u)}function q(f,m){var u=[];n(f,function(w,x){u[x]=m(w,x)});return u}function l(f){return"string"!==typeof f?f:/origin-\d/.test(f)?f.substring(f.indexOf("type=")).replace(/version=\d+:/,""):f}function t(f){var m=f.split("/").slice(-1)[0],u=m.length;n(m.toLowerCase(),
function(w){u+=" abcdefghijklmnopqrstuvwxyz1234567890-_.".indexOf(w)});return f.replace("origin","origin-"+u%8)}function h(f){var m=/^extole-creatives:/.test(f),u=/^extole-media:/.test(f),w=/^core-root:\/\//.test(f),x=/^extole-assets:/.test(f),G=/origin\./.test(f),D=/^http:/.test(f),z=/^https:/.test(f);return m?(f=f.slice(17),h("extole-assets:/core-modules/"+f)):x?(f=f.slice(14),h("extole-media:/assets/"+f)):u?(f=f.slice(13),f=extole.CORE_ROOT+f,h(f)):w?(f=f.slice(12),f=extole.CORE_ROOT+f,h(f)):G?
(f=t(f),f+="?site="+window.location.hostname,h(f)):D?(f=f.slice(5),h(f)):z?(f=f.slice(6),h(f)):f}function g(){}function b(){var f="undefined"!==typeof window.opera&&"[object Opera]"===window.opera.toString(),m=document.createElement("script");this.useInteractive=m.attachEvent&&!(m.attachEvent.toString&&0>m.attachEvent.toString().indexOf("[native code"))&&!f}function d(){n(c,function(f){f._fetched?f._defined||f.define():f.fetch()})}function e(f,m,u,w,x){if("$config"!=f){var G=r(f),D=G||new g;G||(G=
l(f),c[G]=D);f&&m&&(D._fetched=!0);D.start=D.start||(new Date).getTime();D.url=D.url||f;D.dependencies=D.dependencies||m;D.config=D.config||w;D.definedCallback=D.definedCallback||u;D.isRequire=D.isRequire||x}}function a(f,m,u,w){f instanceof Array&&(w=u,u=m,m=f,f=void 0);k.addDefine({url:f,dependencies:m,definedCallback:u,config:w})}var c={};g.prototype={getUnresolvedDependencies:function(){var f=[];n(this.dependencies,function(m){"$config"!=m&&(m=r(m),(!m||m&&!m._defined)&&f.push(m))});return f},
getDependencies:function(){var f=this,m=[];n(f.dependencies,function(u){u="$config"==u?f.config||null:r(u).definition||null;m.push(u)});return m},define:function(){function f(x){m.definedCallback=void 0;m.definition=x;m.end=(new Date).getTime();m.timeToDefine=m.end-m.start;m._defining=!1;m._defined=!0;setTimeout(d,1)}var m=this;m.defineStartTime=m.defineStartTime||(new Date).getTime();if(!m._defining&&!m._defined&&m.dependencies)if(m._defining=!0,0<m.getUnresolvedDependencies().length)m._defining=
!1;else{var u=m.getDependencies(),w={isAsync:!1,async:function(){m.isAsync=!0;w.isAsync=m.isAsync;return function(x){f(x)}}};(function(){if(m.definedCallback){var x=m.definedCallback;x=x&&x.apply(w,u);w.isAsync||f(x)}else f(!0)})()}},fetch:function(){var f=this;f._fetching||f._fetched||(f.url?(f._fetching=!0,f.startFetchTime=(new Date).getTime(),k.loadModule(f.url,function(){f._fetching=!1;f.endFetchTime=(new Date).getTime();f.timeToFetch=f.endFetchTime-f.startFetchTime;f._fetched=!0;f.define()})):
v("Tried to fetch a module without a url - dependencies: "+f.dependencies+" definedCallback: "+(f.definedCallback?"exists":"null")+" config: "+f.config))}};b.prototype={defineQueue:[],interactiveScript:null,currentlyAddingScript:null,getInteractiveScript:function(){if(k.interactiveScript&&"interactive"==k.interactiveScript.readyState)return k.interactiveScript;for(var f=document.getElementsByTagName("head")[0].getElementsByTagName("script"),m,u=f.length-1;0<=u;u--){var w=this.getScriptDataUrl(f[u]);
f[u]&&"interactive"==f[u].readyState&&w&&(m=f[u])}return m},scriptUrlAttributeName:"data-extole-require-url",getScriptDataUrl:function(f){return f.getAttribute(this.scriptUrlAttributeName)},setScriptDataUrl:function(f,m){f.setAttribute(this.scriptUrlAttributeName,m)},attachOnLoad:function(f,m){function u(G){var D=f.readyState;if(w&&"interactive"==D)this.interactiveScript=f;else if("load"===G.type||x.test(D))w?f.detachEvent("onreadystatechange",u):f.removeEventListener("load",u,!1),m(G)}m=m||function(){};
var w=this.useInteractive,x="PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/;w?f.attachEvent("onreadystatechange",u):f.addEventListener("load",u,!1)},defineTimeout:null,addDefine:function(f){if(f.url)f.url=h(f.url);else{var m=this.currentlyAddingScript||this.getInteractiveScript();this.useInteractive&&m&&(m=this.getScriptDataUrl(m),f.url=m,this.interactiveScript=null)}f.dependencies=q(f.dependencies,h);this.useInteractive&&!f.url&&v("defines should not be missing a url in ie.");
this.defineQueue.push(f);this.defineTimeout&&clearTimeout(this.defineTimeout);var u=this;this.defineTimeout=setTimeout(function(){u.intakeDefines()},1)},intakeTimeout:null,intakeDefines:function(){for(var f=[],m;m=this.defineQueue.shift();){var u=[];n(m.dependencies,function(w){w&&u.push(w)});m.url&&r(m.url);m.url||f.push("deps "+m.dependencies);n(u,function(w){e(w)});e(m.url,u,m.definedCallback,m.config,m.isRequire)}this.intakeTimeout&&clearTimeout(this.intakeTimeout);this.intakeTimeout=setTimeout(d,
1)},loadModule:function(f,m){var u=document.createElement("script");u.async=!0;u.crossOrigin="anonymous";this.setScriptDataUrl(u,f);var w=this;this.attachOnLoad(u,function(){clearTimeout(x);if(!w.useInteractive){for(var D,z=w.defineQueue.length-1;0<=z;z--)w.defineQueue[z].url||(D&&v("Multiple anonymous modules loaded in one script - "+f),D=w.defineQueue[z]);D&&(D.url=f)}w.intakeDefines();m&&m(null)});u.src=f;var x=setTimeout(function(){extole.log("warn","[REQUIRE] Module did not load within 2000ms: ",
{moduleUrl:f})},2E3);this.currentlyAddingScript=u;var G=document.getElementsByTagName("head")[0]||document.head;G?G.appendChild(u):extole.log("warn","[REQUIRE] <head> element not found on trying to load "+f,void 0);this.currentlyAddingScript=void 0}};var k=new b;a.getModule=function(f){return r(f)};var p=0;extole.define=a;extole.require=function(f,m){var u=k,w=u.addDefine;p++;w.call(u,{url:"anonymous_"+p,dependencies:f,definedCallback:m,isRequire:!0})};extole.define("extole-require",[],function(){return{resolveUrl:h}});
setTimeout(function(){var f=!1,m=[];n(c,function(u){u._defined||(f=!0);m.push({defineStartTime:u.defineStartTime,dependencies:u.dependencies,end:u.end,start:u.start,isRequire:u.isRequire,timeToDefine:u.timeToDefine,url:u.url,_defined:u._defined,_defining:u._defining,_fetched:u._fetched})});f&&extole.DUMP_REQUIRE_MODULES_ON_ERROR&&extole.log("error","After 7000ms there are unresolved extole-require modules.  ###"+JSON.stringify(m)+"###")},7E3)}();
(function(){try{(function(r,v,n,q,l){r[v]=r[v]||{};for(r[v].q=r[v].q||[];l<q.length;)n(q[l++],r[v])})(window,"extole",function(r,v){v[r]=v[r]||function(){v.q.push([r,arguments])}},["createZone"],0),(new Function('extole._facebookShareType = "og";'))()}catch(r){extole.log("error","Error executing extended core javascript. Message: "+r.message+" Stack: "+r.stack)}})();
extole.define("extole-uri-parser",["https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/collection.js","https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/uri.js"],function(r,v){var n=/^extole_(?!zone)/,q=/^extole_zone_/;return new function(){function l(g){var b={};g=g||h;r.each(g,function(d,e){n.test(e)&&(e=e.replace(n,""),b[e]=d)});return b}function t(){var g,b,d={};this.withName=function(e){g=e;return this};this.withElementId=
function(e){b=e;return this};this.withData=function(e,a){d[e]=a;return this};this.build=function(){var e={};g&&(e.name=g);b&&(e.elementId=b);d&&(e.data=d);return e}}var h=v.deserialize(location.search);this.parseUriZoneDefinition=function(g){var b=new t,d;g=g||h;var e=l(g);r.each(e,function(a,c){b.withData(c,a)});r.each(g,function(a,c){q.test(c)&&(c=c.replace(q,""),"name"===c?(d=!0,b.withName(a)):"element_id"===c?b.withElementId(a):b.withData(c,a))});return d?b.build():null};this.parseGlobalZoneParameters=
l}});(function(r,v,n,q,l){r[v]=r[v]||{};for(r[v].q=r[v].q||[];l<q.length;)n(q[l++],r[v])})(window,"extole",function(r,v){v[r]=v[r]||function(){v.q.push([r,arguments])}},["createZone","log"],0);
(function(){var r=[{name:"Branded Program Domain",programDomain:"share.vimeo.com",sitePatterns:["share.vimeo.com","vimeo.com","*.vimeo.com","*.vimeows.com"],siteRegexPatterns:["share\\.vimeo\\.com\\.?$","vimeo\\.com\\.?$",".*\\.vimeo\\.com\\.?$",".*\\.vimeows\\.com\\.?$"]},{name:"Staging Vimeo Extole Program",programDomain:"share.vimeows.com",sitePatterns:["share.vimeows.com"],siteRegexPatterns:["share\\.vimeows\\.com\\.?$"]}];extole.CORE_ROOT="https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437";
extole.CORE_CONFIG={backendTargetingEnabled:!0,isCookieConsentEnabled:!1,isJsCreativeRespondsWithHtmlEnabled:!0,isGlobalZoneParametersEnabled:!1,isAccessTokenIncludedInResponseEnabled:!0,cookieConsentPolicy:"COOKIE_CONSENT_OR_SESSION_COOKIE",cookieConsentEnabled:!1};extole.CLIENT_ID="32535";extole.BUILD_DATE="1705989854062";extole.VERSION="6.0";extole.IS_DEBUG_ENABLED=extole.debug||/[?&]extole_debug=true(&|$)/.test(location.search);extole.PROGRAM=function(){function v(b,d){b=Error.call(this,b);this.name=
"ExtoleError";this.message=b.message;this.stack=b.stack;this.code=d}function n(b,d){if(b.length)for(var e=0;e<b.length;e++)d(b[e],e);else for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&d(b[e],e)}function q(b,d){var e=[];n(b,function(a){(a=d(a))&&(e[e.length]=a)});return e}function l(b,d){d=d||[];var e=!1;n(d,function(a){(new RegExp(a)).test(b)&&(e=!0)});return e}function t(){extole.require(["https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/uri.js","https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/ajax.js"],
function(b,d){var e=extole.CORE_ROOT;b=e.replace(/(https?:\/\/[a-z-\.]+)(\/.*)/,"$1")+"/_extole_core.gif"+b.serialize({core_root:e,referer:window.location.hostname});d({url:b})})}v.prototype=Error();v.prototype.constructor=v;var h=function(b){var d=window.location.hostname;return q(b,function(e){if(l(d,e.siteRegexPatterns))return e})}(r),g=h[0];if(!g)throw t(),new v("No program domain is configured for hostname: "+window.location.hostname+" unable to use Extole API","site_configuration_error");1<
h.length&&extole.log("warn","Multiple programs matched hostname: "+window.location.hostname+" programs: "+JSON.stringify(h));return g}();extole.require(["https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/uri.js","https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/logger.js","create-zone-executor"],function(v,n,q){function l(){function b(e){var a=e[0];"function"===typeof d[a]?(d[a].apply(null,e[1]),extole.q.history.push({name:e[0],
args:e[1],timestamp:Date.now(),stack:Error().stack})):n.warn("Unable to execute method: "+a+", it is not implemented.")}var d={log:function(){var e=Array.prototype.slice.call(arguments),a=e[0];"function"===typeof n[a]&&n[a].apply(null,e.slice(1))},createZone:q.initiateExecution};for(extole.q.history=[];extole.q.length;)b(extole.q.shift());extole.q.push=b}function t(){extole.require(["extole-uri-parser"],function(b){var d=v.deserialize(location.search);(b=b.parseUriZoneDefinition(d))&&extole.createZone(b)})}
function h(){if("function"===typeof window.onerror)var b=window.onerror;window.onerror=function(d,e,a,c,k){if(b)try{b(d,e,a,c,k)}catch(m){}e=e||window.location.href||"no_source_or_location.href";k=k&&k.stack?k.stack:"no_error.stack";var p=[],f=JSON.stringify({MESSAGE:d,SOURCE:e,LINE_NUMBER:a,COLUMN_NUMBER:c,STACK_TRACE:k},function(m,u){if(null!==u&&"object"===typeof u){if(0<=p.indexOf(u))return;p.push(u)}return u});a=extole.PROGRAM.programDomain.split(".").join("\\.");a=new RegExp("^(http|https):\\/\\/("+
a+"|(([A-Za-z0-9-]{1,}\\.){1,}|)(xtlo\\.net|extole(\\.com|\\.io)))(?=(\\/|\\?|$))");((k+d).match(/extole/i)||a.test(e))&&extole.require(["https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/logger.js"],function(m){m.error("Unhandled exception",JSON.parse(f))})}}function g(){extole._bootstrapped=!0;h();l();t()}extole.bootstrap=g;extole._bootstrapped||g();if("undefined"!==typeof window.extoleAsyncInit)try{window.extoleAsyncInit()}catch(b){extole.require(["https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/logger.js"],
function(d){d.error("Error executing extended core javascript. Message : "+b.message+" Stack: "+b.stack)})}})})();
extole.define("https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/ExtoleError.js",[],function(){function r(n,q,l,t){n=Error.call(this,n);this.name="ExtoleError";this.message=n.message||"no_message";this.stack=Error().stack;this.code=q||"extole_error";this.data=l||{};this.logLevel=0<=v.indexOf(t)?t:"error"}var v=["debug","info","warn","error"];r.prototype=Error();r.prototype.constructor=r;r.prototype.toString=function(){return this.name+" ["+this.logLevel+"]: message: "+
this.message+"; code: "+this.code+"; data: "+JSON.stringify(this.data,null,4)+"; stack trace: "+this.stack+";"};return r});
extole.define("https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/collection.js",["https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/ExtoleError.js","https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/type.js"],function(r,v){function n(l,t){var h;if(l.length===Number(l.length))for(h=0;h<l.length;h++){var g=t(l[h],h);if(!1===g)return!1}else for(h in l)if(Object.prototype.hasOwnProperty.call(l,
h)&&(g=t(l[h],h),!1===g))return!1}function q(l){if(!l||"object"!==typeof l&&!v.isPlainFunction(l))l={};for(var t=1;t<arguments.length;t++)if(v.isPlainObject(arguments[t]))for(var h in arguments[t]){var g=arguments[t][h];g!==l&&void 0!==g&&(v.isPlainObject(g)&&v.isPlainObject(l[h])?g=q(l[h],g):v.isArray(g)&&v.isArray(l[h])&&l[h].concat&&(g=l[h].concat(g)),l[h]=g)}return l}n.BREAK=!1;return{each:n,map:function(l,t){function h(d,e){b=[];n(d,function(a,c){b.push(e(a,c))})}function g(d,e){b={};n(d,function(a,
c){b[c]=e(a,c)})}var b;if(v.isArray(l))h(l,t);else if(v.isPlainObject(l))g(l,t);else throw new r(l+" argument must be type object or array","INVALID_ARGUMENT_EXCEPTION");return b},filter:function(l,t){function h(d,e){b=[];n(d,function(a,c){e(a,c)&&b.push(a)})}function g(d,e){b={};n(d,function(a,c){e(a,c)&&(b[c]=a)})}var b;if(v.isArray(l))h(l,t);else if(v.isPlainObject(l))g(l,t);else throw new r(l+" argument must be type object or array","INVALID_ARGUMENT_EXCEPTION");return b},merge:q,clone:function(l){return JSON.parse(JSON.stringify(l))},
flatten:function(l){function t(g,b){if(v.isPlainObject(g))n(g,function(e,a){var c=b.slice();c.push(a);t(e,c)});else{var d=b.join(".");h[d]=g}}if(!v.isPlainObject(l))return l;var h={};t(l,[]);return h},find:function(l,t){var h;n(l,function(g,b){if(t(g,b))return h=g,n.BREAK});return h},reverse:function(l){var t=[];if(!l||l.length!==Number(l.length))return l;for(var h=l.length-1;0<=h;h--)t.push(l[h]);return t},nashornToJs:function(l){if(v.isPlainJs(l)||!l)return l;if(v.isJavaMap(l)){var t={};for(var h in l)t[h]=
l[h]}else if(v.isNumber(l.length))t=[],n(l,function(g,b){t[b]=g});else return l;return t},intersection:function(l,t){var h=[];n(l,function(g){0>t.indexOf(g)||0<=h.indexOf(g)||h.push(g)});return h},difference:function(l,t){var h=[];n(l,function(g){0<=t.indexOf(g)||0<=h.indexOf(g)||h.push(g)});return h}}});
extole.define("https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/cookie.js",["https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/logger.js"],function(r){function v(h){try{return decodeURIComponent(h.replace(q," "))}catch(g){return r.info("** cookie.decode ** Cookie error for: "+h,{error:g,message:g.message,stack:g.stack,cookiePart:h}),""}}function n(h){h=v(h);return 0===h.indexOf('"')?h.slice(1,-1).replace(l,'"').replace(t,
"\\"):h}var q=/\+/g,l=/\\"/g,t=/\\\\/g;return function(h,g,b){if(void 0!==g){b=b||{};var d=document;h=encodeURIComponent(h);g=encodeURIComponent(g);if(b.expires){var e=b.expires;if(!e||!e.toUTCString){var a=new Date;a.setDate(a.getDate()+("number"===typeof e?e:0));e=a}e="; expires="+e.toUTCString()}else e="";return d.cookie=[h,"=",g,e,b.path?"; path="+b.path:"",b.domain?"; domain="+b.domain:"",b.samesite?"; samesite="+b.samesite:"","; secure"].join("")}a:{b=document.cookie?document.cookie.split("; "):
[];d=h?null:{};g=0;for(e=b.length;g<e;g++){a=b[g].split("=");var c=v(a[0]);if(!h)d[c]=n(a[1]);else if(h===c){h=n(a[1]);break a}}h=d}return h}});
extole.define("https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/device-type.js",[],function(){function r(q){return v.test(q)}var v=RegExp("Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|Dolphin|Fennec|(hpw|web)OS|Zune|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Silk-Accelerated|Skyfire|NetFront","i"),n=/WebView|\swv|(iPhone|iPod|iPad)(?!.*Safari)|Android.*(Version\/\d+\.\d+\s)|Linux; U; Android/i;return{isMobile:r,isDesktop:function(q){return!r(q)},isWebview:function(q){return n.test(q)}}});
extole.define("https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/dom.js",["https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/logger.js"],function(r){function v(d,e){return(e||document).querySelectorAll(d)}function n(d,e){return v(d,e)[0]}function q(d,e){function a(){clearTimeout(k);e(c);t.removeListener(c,"load",a)}e=e||function(){};if(b[d]||!d)return e(b[d]),b[d]||null;b[d]=document.createElement("link");var c=b[d];h.setAttribute(c,
"rel","stylesheet");h.setAttribute(c,"href",d);g.append(n("head"),c);t.addListener(c,"load",a);var k=setTimeout(function(){r.warn("Load timeout reached for stylesheet: ",{url:d});a()},5E3);return c}var l={each:function(d,e){var a;if(d.length===Number(d.length))for(a=0;a<d.length;a++){var c=e(d[a],a);if(!1===c)return!1}else for(a in d)if(Object.prototype.hasOwnProperty.call(d,a)&&(c=e(d[a],a),!1===c))return!1},extend:function(){var d,e,a=arguments[0]||{},c=1,k=arguments.length,p=!1,f=this.extend;"boolean"===
typeof a&&(p=a,a=arguments[1]||{},c=2);for("object"===typeof a||this.isFunction(a)||(a={});c<k;c++){var m=arguments[c];if(null!==m)for(d in m){var u=a[d];var w=m[d];a!==w&&(p&&w&&(this.isPlainObject(w)||(e=this.isArray(w)))?(e?(e=!1,u=u&&this.isArray(u)?u:[]):u=u&&this.isPlainObject(u)?u:{},a[d]=f(p,u,w)):void 0!==w&&(a[d]=w))}}return a},isFunction:function(d){return d&&"function"===typeof d&&d.call&&d.apply},isPlainObject:function(d){if("[object Object]"!==String(d)||d.nodeType||d.window&&d.window==
d)return!1;try{if(d.constructor&&!Object.prototype.hasOwnProperty.call(d.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},isArray:function(d){return d instanceof Array}};l.each.BREAK=!1;var t=function(){function d(p,f,m){for(var u=[],w=0;w<k.length;w++){var x=k[w];x.element==p&&x.eventType==f&&x.listener==m&&u.push({index:w,eventListener:x})}return u}function e(p){for(var f=[],m=0;m<k.length;m++){var u=k[m];u.element===p&&f.push(u)}return f}function a(p){this.originalEvent=
p;this.type=p.type;this.keyCode=p.keyCode;this.target=p.srcElement?p.srcElement:p.target}function c(p,f,m){m=d(p,f,m);0>=m.length?r.info("events.remove - Couldn't find exiting event listener for type \""+f+'" listener on element '+p):l.each(m,function(u){var w=u.index;u=u.eventListener;p.removeEventListener?p.removeEventListener(f,u.listenerWrapper,!1):p.detachEvent("on"+f,u.listenerWrapper);k.splice(w,1)})}var k=[];a.prototype={preventDefault:function(){var p=this.originalEvent;p.preventDefault?
p.preventDefault():p.returnValue=!1},stopPropagation:function(){var p=this.originalEvent;p.stopPropagation&&p.stopPropagation();p.cancelBubble=!0}};return{addListener:function(p,f,m){function u(x){w&&(x=window.event);return m.call(p,new a(x))}if(0<d(p,f,m).length)r.warn("events.add - Listener already exists for event "+f+" on element "+p);else{var w=!p.addEventListener;k.push({element:p,eventType:f,listener:m,listenerWrapper:u});p.addEventListener?p.addEventListener(f,u,!1):p.attachEvent("on"+f,u)}},
triggerEvent:function(p,f,m){var u=document.createEvent("Event");m=l.extend({},m);var w=!1===!m.bubbles,x=!0===m.cancelable;delete m.bubbles;delete m.cancelable;u.initEvent(f,w,x);l.extend(u,m);p.dispatchEvent(u)},removeListener:c,clearListeners:function(p){p=e(p);l.each(p,function(f){c(f.element,f.eventType,f.listener)})}}}(),h=function(){function d(a){a=a.className;var c={};if(!a)return c;l.each(a.split(" "),function(k){c[k]=1});return c}function e(a){var c="";l.each(a,function(k,p){c+=" "+p});
return c.slice(1)}return{setAttribute:function(a,c,k){a.setAttribute(c,k);a[c]=k},getAttribute:function(a,c){return a.getAttribute(c)},removeAttribute:function(a,c){return a.removeAttribute(c)},addClass:function(a,c){var k=d(a);k[c]||(k[c]=1,a.className=e(k))},removeClass:function(a,c){var k=d(a);delete k[c];a.className=e(k)},getClassNames:function(a){return a.className.split(" ")}}}(),g=function(){function d(a){var c=document.createDocumentFragment(),k=document.createElement("div");k.innerHTML=a;
l.each(k.childNodes,function(p){1==p.nodeType&&c.appendChild(p)});return c}function e(a){var c;l.each(a.childNodes,function(k){if(!c&&1==k.nodeType)return c=k,l.each.BREAK});return c}return{prepend:function(a,c){var k=e(a),p=c;"string"===typeof c&&(p=d(c));k?a.insertBefore(p,k):a.appendChild(p)},append:function(a,c){var k=c;"string"===typeof c&&(k=d(c));a.appendChild(k)}}}(),b={};return{addEventListener:t.addListener,removeEventListener:t.removeListener,triggerEvent:t.triggerEvent,clearEventListeners:t.clearListeners,
getAttribute:h.getAttribute,setAttribute:h.setAttribute,removeAttribute:h.removeAttribute,addClass:h.addClass,removeClass:h.removeClass,getClassNames:h.getClassNames,prepend:g.prepend,append:g.append,query:v,queryFirst:n,isVisible:function(d,e){return!!(n(d,e)||{}).offsetParent},injectStylesheet:q,injectStylesheets:function(d,e){function a(p){--c||e(k)}e=e||function(){};if(0===d.length)e();else{var c=0,k=[];l.each(d,function(p){c++;setTimeout(function(){k.push(q(p,a))},1)})}},scrollIntoViewIfNeeded:function(d,
e){function a(w,x){return{start:w,length:x,end:w+x}}function c(w,x){return!1===e||x.start<w.end&&w.start<x.end?Math.min(w.start,Math.max(x.start,w.end-x.length)):(w.start+w.end-x.length)/2}function k(w,x){return{x:w,y:x,translate:function(G,D){return k(w+G,x+D)}}}function p(w,x){for(;w;)x=x.translate(w.offsetLeft,w.offsetTop),w=w.offsetParent;return x}var f=p(d,k(0,0)),m=k(d.offsetWidth,d.offsetHeight);d=d.parentNode;for(var u;d instanceof HTMLElement;)u=p(d,k(d.clientLeft,d.clientTop)),d.scrollLeft=
c(a(f.x-u.x,m.x),a(d.scrollLeft,d.clientWidth)),d.scrollTop=c(a(f.y-u.y,m.y),a(d.scrollTop,d.clientHeight)),f=f.translate(-d.scrollLeft,-d.scrollTop),d=d.parentNode}}});
extole.define("https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/event-bus.js",[],function(){function r(){function q(h,g,b,d){if(!b)return!0;if("object"===typeof b){for(var e in b)h[g].apply(h,[e,b[e]].concat(d));return!1}if(t.test(b)){b=b.split(t);e=0;for(var a=b.length;e<a;e++)h[g].apply(h,[b[e]].concat(d));return!1}return!0}function l(h,g){var b,d=-1,e=h.length,a=g[0],c=g[1],k=g[2];switch(g.length){case 0:for(;++d<e;)(b=h[d]).callback.call(b.ctx);break;case 1:for(;++d<
e;)(b=h[d]).callback.call(b.ctx,a);break;case 2:for(;++d<e;)(b=h[d]).callback.call(b.ctx,a,c);break;case 3:for(;++d<e;)(b=h[d]).callback.call(b.ctx,a,c,k);break;default:for(;++d<e;)(b=h[d]).callback.apply(b.ctx,g)}}this._events={};var t=/\s+/;this.on=function(h,g,b){if(!q(this,"on",h,[g,b])||!g)return this;this._events||(this._events={});(this._events[h]||(this._events[h]=[])).push({callback:g,context:b,ctx:b||this});return this};this.off=function(h,g,b){var d,e,a;if(!this._events||!q(this,"off",
h,[g,b]))return this;if(!h&&!g&&!b)return this._events=void 0,this;var c=h?[h]:n.keys(this._events);var k=0;for(e=c.length;k<e;k++)if(h=c[k],d=this._events[h]){var p=[];this._events[h]=p;if(g||b){var f=0;for(a=d.length;f<a;f++){var m=d[f];(g&&g!==m.callback&&g!==m.callback._callback||b&&b!==m.context)&&p.push(m)}}p.length||delete this._events[h]}return this};this.once=function(h,g,b){function d(){var a=v.call(arguments);e.off(h,d,b);g.apply(this,a)}var e=this;this.on(h,d,b);return this};this.trigger=
function(h){if(!this._events)return this;var g=v.call(arguments,1);if(!q(this,"trigger",h,g))return this;var b=this._events[h],d=this._events.all;b&&l(b,g);d&&l(d,arguments);return this}}var v=Array.prototype.slice,n={isPlainObject:function(q){if("[object Object]"!==String(q)||q.nodeType||q.window&&q.window==q)return!1;try{if(q.constructor&&!Object.prototype.hasOwnProperty.call(q.constructor.prototype,"isPrototypeOf"))return!1}catch(l){return!1}return!0},keys:function(q){if(!this.isPlainObject(q))return[];
var l=[],t;for(t in q)Object.prototype.hasOwnProperty.call(q,t)&&l.push(t);return l},_idCounter:0,uniqueId:function(q){var l=String(++this._idCounter);return q?q+l:l}};return{create:function(){return new r}}});
extole.define("https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/logger.js",[],function(){function r(a,c,k){l||(l=c.getGlobalServices().getJsLoggingService());l[a](k)}function v(a,c,k){var p=String(extole.CORE_ROOT).match(/coreAssetsVersion=(\d+)/);k=k||{};k.pageId=h;k.referer=g;k.coreAssetsVersion=p&&p[1];try{var f=[c||"no message","START_JSON",JSON.stringify(k),"END_JSON"].join(" ")}catch(m){q("Failed to stringify log's json data",{exception:m});return}if(!extole.LOG_EXCLUDE_REGEX||
!f.match(extole.LOG_EXCLUDE_REGEX)){e[f]=++e[f]||1;if(b[a]>=b[extole.LOG_LEVEL_CONSOLE]&&(c=a+" "+f,window.console))if(window.console[a.toLowerCase()])window.console[a.toLowerCase()](c);else window.console.log(c);b[a]>=b[extole.LOG_LEVEL_REMOTE]&&(c=e[f],d[c]&&n(a,f+(1<c?" log count: "+c:"")))}}function n(a,c){extole.require(["https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/api.js"],function(k){k.post("/api/v4/debug/logs",{level:a,message:c},null,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})})}
function q(a,c){v("ERROR",a,c)}var l;if("undefined"===typeof window)return{debug:function(a,c){r("debug",a,c)},info:function(a,c){r("info",a,c)},warn:function(a,c){r("warn",a,c)},error:function(a,c){r("error",a,c)},LOGGING_ENDPOINT:"/api/v4/debug/logs"};var t=extole.IS_DEBUG_ENABLED?"DEBUG":"OFF",h=String((new Date).getTime()),g=window.location.href,b={DEBUG:0,INFO:1,WARN:2,ERROR:3,OFF:4},d={1:!0,3:!0,10:!0,30:!0,100:!0,250:!0,500:!0,1E3:!0};extole.LOG_EXCLUDE_REGEX=extole.LOG_EXCLUDE_REGEX||void 0;
extole.LOG_LEVEL_CONSOLE=extole.LOG_LEVEL_CONSOLE||t;extole.LOG_LEVEL_REMOTE=extole.LOG_LEVEL_REMOTE||"WARN";var e={};return{debug:function(a,c){v("DEBUG",a,c)},info:function(a,c){v("INFO",a,c)},warn:function(a,c){v("WARN",a,c)},error:q,LOGGING_ENDPOINT:"/api/v4/debug/logs"}});
extole.define("https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/Timer.js",[],function(){return function(){var r=this,v;this.start=function(){if(v)throw Error("Timer.start has already been called");v=new Date;return r};this.getElapsedTime=function(){if(!v)throw Error("Timer has not been started");return new Date-v}}});
extole.define("https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/type.js",[],function(){function r(q,l){return function(t){return v(q,t,l)}}function v(q,l,t){t=t||{};q=Object.prototype.toString.call(l)==="[object "+q+"]";l=l&&t.construct?l.constructor===t.construct:!0;return(t.negate?!q:q)&&l}var n=/\[object (Function|Array|String|Boolean|Number|Undefined|Null)\]/;return{isPlainJs:function(q){return this.isPlainObject(q)||n.test(Object.prototype.toString.call(q))},
isJavaMap:function(q){return"undefined"!==typeof Java&&Java.type?q instanceof Java.type("java.util.Map"):!1},isPlainObject:r("Object",{construct:Object}),isPlainFunction:r("Function"),isArray:r("Array"),isString:r("String"),isBoolean:r("Boolean"),isNumber:r("Number"),isUndefined:r("Undefined"),isDefined:r("Undefined",{negate:!0}),isNull:r("Null"),test:v}});
extole.define("https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/uri.js",["https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/collection.js"],function(r){function v(g){var b={};(function c(e,a){for(var k in e){var p=e[k],f=(a?a+".":"")+k;"[object Object]"===Object.prototype.toString.call(p)?c(p,f):q(f)&&(b[f]=p)}})(g);return b}function n(g){try{return decodeURIComponent(g)}catch(b){return g}}function q(g){return"__proto__"!==
g&&"prototype"!==g&&"constructor"!==g}function l(g,b,d){b=(b||[]).concat("object"===typeof extole&&extole.PROGRAM?extole.PROGRAM.siteRegexPatterns:[]);d=t(d||location.href);g=t(g);return(/^https?:\/\//.test(g)?r.find(b,function(e){var a=h.exec(g);return(new RegExp(e)).test(a&&a[1])}):1)?g:d}function t(g){return g.replace(RegExp("(j|%4A|%6A)(a|%41|%61)(v|%56|%76)(a|%41|%61)(s|%53|%73)(c|%43|%63)(r|%52|%72)(i|%49|%69)(p|%50|%70)(t|%54|%74)(:|%3A)","gi"),"")}var h=/^https?:\/\/([^/:?#]+)/i;return{serialize:function(g){var b=
"",d;for(d in g)b+="&"+encodeURIComponent(d)+"="+encodeURIComponent(String(g[d]));return b.replace(/^&/,"?")},deserialize:function(g){var b={};if(!g)return b;g=(g.match(/^\?/)?g.slice(1):g).split("&");for(var d=0;d<g.length;d++){var e=g[d].split("="),a=n(e[0]);e=n(e[1]);q(a)&&(b[a]=e)}return b},objectToDotNotation:v,dotNotationToObject:function(g){var b={};g=v(g);for(var d in g){for(var e=b,a=d.split("."),c=a.pop();a.length;){var k=a.shift();q(k)&&(e[k]=e[k]||{},e=e[k])}q(c)&&(e[c]=g[d])}return b},
decodeComponent:n,encodeComponent:function(g){return encodeURIComponent(g)},getSafeRedirectUrl:l,executeSafeRedirect:function(g,b,d){window.location.href=l(g,b,d)}}});
extole.define("https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/ajax.js",["https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/collection.js","https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/uri.js","https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/type.js","https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/logger.js"],
function(r,v,n,q){function l(b,d){function e(){4!==b.readyState||z||(z=!0,String(b.status||200).match(/^[23]/)?"function"===typeof G?G.call(b,b.responseText,b):q.warn("'complete' callback must be a function."):D.call(b,b.statusText,b.status),k())}function a(B){z||(z=!0,q.error("Error with url "+u+"= "+p.join(","),c(B)),D.call(b,b.statusText,b.status))}function c(B){return{eventType:B&&B.type||null,options:d,readyState:b.readyState,response:b.response,responseText:b.responseText,responseType:b.responseType,
responseURL:b.responseURL,responseXML:b.responseXML,status:b.status,statusText:b.statusText,timeout:b.timeout,responseHeaders:b.getAllResponseHeaders()}}function k(B){0>u.indexOf(q.LOGGING_ENDPOINT)&&q.debug("ajax request complete",c(B))}var p=Array.prototype.slice.call(arguments),f=d.headers||{},m=d.xhrFields||{},u=d.url||"",w=d.data||"",x=(d.type||"get").toUpperCase(),G=d.complete||function(){},D=d.error||function(){};n.isPlainObject(w)&&("GET"===x?(u+=v.serialize(w),w=null):w=JSON.stringify(w));
b.open(x,u,!0);r.merge(b,m);r.each(f,function(B,y){try{b.setRequestHeader(y,B)}catch(E){q.error("AJAX ERROR: Couldn't set request header "+y+" to "+B)}});var z=!1;b.onload=e;b.onreadystatechange=e;b.onerror=a;b.ontimeout=a;b.onabort=k;b.send(w)}function t(b){r.each(b,function(d,e){"content-type"===e.toLowerCase()&&delete b[e]})}function h(b){b=b||{};var d=!1;for(var e=0;e<g.length;e++){try{d=g[e]()}catch(a){continue}break}l(d,b);return d}var g=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},
function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];h.convertToFormUrlEncoded=function(b,d){function e(c){var k={};r.each(c,function(p,f){f=0<=f.indexOf(".")?'"'+f+'"':f;n.isPlainObject(p)&&(p=e(p));k[f]=p});return k}var a=[];t(b);b["content-type"]="application/x-www-form-urlencoded";d=e(d);d=r.flatten(d);r.each(b,function(c,k){"content-type"!==k.toLowerCase()&&(a.push("::headers."+k+"="+c),delete b[k])});r.each(d,function(c,k){n.isUndefined(c)||
a.push(encodeURIComponent(k)+"="+(n.isNull(c)?"":encodeURIComponent(c)))});return a.join("&")};h.convertToMultipartFormData=function(b,d){var e=new FormData;r.each(d,function(a,c){e.append(c,a)});t(b);return e};return h});
extole.define("https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/client/program.js",[],function(){return{getName:function(){return extole.PROGRAM.name},getProgramDomain:function(){return extole.PROGRAM.programDomain},getSitePatterns:function(){return extole.PROGRAM.sitePatterns},getSiteRegexPatterns:function(){return extole.PROGRAM.siteRegexPatterns},getProtocol:function(){return"https://"}}});
extole.define("https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/client/token-store.js","https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/ExtoleError.js https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/collection.js https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/logger.js https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/event-bus.js https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/cookie.js https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/ajax.js".split(" "),
function(r,v,n,q,l,t){function h(){function a(){H[d.MEMORY]=H[d.MEMORY]||new u;H[d.COOKIE]=H[d.COOKIE]||new w;H[d.LOCAL_STORAGE]=H[d.LOCAL_STORAGE]||new x;extole.COOKIES_DISABLED&&(H[d.COOKIE].remove(),delete H[d.COOKIE]);extole.LOCAL_STORAGE_ALWAYS_ENABLED||extole.LOCAL_STORAGE_ENABLED_WHEN_CONSENTED||extole.LOCAL_STORAGE_ENABLED_WHEN_UNCONSENTED||(H[d.LOCAL_STORAGE].remove(),delete H[d.LOCAL_STORAGE])}function c(A){function C(I,J){F+=1;I?5>F?k(C):(I="Failed to fetch access token after 5 attempts. Last Error: "+
I.message,n.error(I),A(Error(I))):A(null,J)}var F=0;k(C)}function k(A){p("POST","/api/v5/token",null,function(C,F){A(C,F)})}function p(A,C,F,I){function J(K,M){try{var N=JSON.parse(K)}catch(P){M(P);return}M(null,N)}F=F||f();var Q="https://"+extole.PROGRAM.programDomain+C+(F?"?access_token="+F:"");t({url:Q,type:A,headers:{"content-type":"application/json"},complete:function(K){J(K,I)},error:function(K,M){var N=this,P="Api request to "+C+" failed: "+M+" "+K,R={method:A,url:Q,statusText:K||null,http_status_code:M||
null};J(N.responseText,function(O,L){if(O){O="Failed to parse api error response as json";var S="json_parse_error";L=v.merge({response:N.responseText},R)}else O=L.message||P,S=L.code||"failed_api_request",L=v.merge({},L,R);I(new r(O,S,L))})}})}function f(){var A=y===b.YEAR?z():B();return(A=v.find(A,function(C){C=C.get();return!("string"!==typeof C||"undefined"===C||"null"===C||!C.length)}))?A.get():null}function m(A,C){var F=f();if(!A&&F)A=F;else if(!A&&!F)return;var I=F!==A;y=Object.prototype.hasOwnProperty.call(b,
C)&&C||(I||!y?G():y);D(y);v.each(y===b.YEAR?z():B(),function(J){J.set(A,y)});I&&E.trigger("change:access_token");F&&I&&n.debug("ACCESS_TOKEN_CHANGE - the access token changed from: "+F+", to: "+A)}function u(){var A={};this.get=function(){return A.extole_access_token};this.set=function(C){A.extole_access_token=C};this.remove=function(){delete A.extole_access_token}}function w(){this.get=function(){return l("extole_access_token")};this.set=function(A,C){l("extole_access_token",A,{expires:e[C.toUpperCase()],
path:"/",samesite:"strict"})};this.remove=function(){l("extole_access_token","",{expires:-1,path:"/"})}}function x(){var A;(function(){var C="test"+(new Date).getTime();try{localStorage.setItem(C,C),localStorage.removeItem(C)}catch(F){A=!1;return}A=!0})();this.get=function(){return A?localStorage.getItem("extole_access_token"):null};this.set=function(C){A&&localStorage.setItem("extole_access_token",C)};this.remove=function(){A&&localStorage.removeItem("extole_access_token")}}function G(){if(extole.CORE_CONFIG.isCookieConsentEnabled)switch(extole.CORE_CONFIG.cookieConsentPolicy){case g.COOKIE_CONSENT_OR_SESSION_COOKIE:return b.SESSION;
case g.COOKIE_CONSENT_OR_NO_COOKIE:return b.NO_COOKIE;default:return b.NO_COOKIE}return b.YEAR}function D(){var A=y===b.YEAR?z():B();v.each(H,function(C){0>A.indexOf(C)&&C.remove()})}function z(){var A=[d.MEMORY];Object.prototype.hasOwnProperty.call(H,d.COOKIE)&&A.push(d.COOKIE);(extole.LOCAL_STORAGE_ENABLED_WHEN_CONSENTED||extole.LOCAL_STORAGE_ALWAYS_ENABLED)&&A.push(d.LOCAL_STORAGE);return A.map(function(C){return H[C]})}function B(){var A=[d.MEMORY];extole.CORE_CONFIG.cookieConsentPolicy===g.COOKIE_CONSENT_OR_SESSION_COOKIE&&
Object.prototype.hasOwnProperty.call(H,d.COOKIE)&&A.push(d.COOKIE);(extole.LOCAL_STORAGE_ENABLED_WHEN_UNCONSENTED||extole.LOCAL_STORAGE_ALWAYS_ENABLED)&&A.push(d.LOCAL_STORAGE);return A.map(function(C){return H[C]})}var y,E=q.create(),H={};a();this.fetch=function(A){A=A||function(){};c(function(C,F){var I=F.access_token;I&&m(I);A(C,F,y)})};this.getTokenDetails=function(A){A=A||function(){};p("GET","/api/v5/token",f(),A)};this.get=f;this.set=m;this.remove=function(){y=G();v.each(H,function(A){A.remove()})};
this.setUnconsented=function(){y=G();m()};this.initializeStores=a;this.events=E}var g={COOKIE_CONSENT_DISABLED:"COOKIE_CONSENT_DISABLED",COOKIE_CONSENT_OR_SESSION_COOKIE:"COOKIE_CONSENT_OR_SESSION_COOKIE",COOKIE_CONSENT_OR_NO_COOKIE:"COOKIE_CONSENT_OR_NO_COOKIE"},b={NO_COOKIE:"NO_COOKIE",SESSION:"SESSION",YEAR:"YEAR"},d={MEMORY:"MEMORY",COOKIE:"COOKIE",LOCAL_STORAGE:"LOCAL_STORAGE"},e={YEAR:365,SESSION:null};extole.tokenStore=extole.tokenStore?extole.tokenStore:new h;return extole.tokenStore});
extole.define("https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/client/metric-registry.js",["https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/client/program.js","https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/ajax.js","https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/client/token-store.js"],function(r,v,n){function q(h,g,b){b={metric_type:h,
key:g,value:b};h={"Content-Type":"application/x-www-form-urlencoded","X-Extole-App":"javascript_sdk"};n.get()&&(h.Authorization="Bearer+"+n.get(),g=[r.getProtocol(),r.getProgramDomain(),"/api/v4/debug/metrics"].join(""),b=v.convertToFormUrlEncoded(h,b),v({url:g,type:"POST",headers:h,data:b,xhrFields:{withCredentials:!0}}))}function l(h){this.increment=function(g){q("COUNTER",h,g?g:1)}}function t(h){this.update=function(g){q("HISTOGRAM",h,g)}}return{histogram:function(h){return new t(h)},counter:function(h){return new l(h)}}});
extole.define("ZoneBrowserContext",["https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/uri.js","https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/collection.js"],function(r,v){function n(t,h,g){this.getElement=function(){return g};this.getName=function(){return t};this.getData=function(){return h};this.getParameters=function(){return h}}function q(){this.getName=function(){return extole.PROGRAM.name};this.getProgramDomain=
function(){return extole.PROGRAM.programDomain};this.getSitePatterns=function(){return extole.PROGRAM.sitePatterns};this.getSiteRegexPatterns=function(){return extole.PROGRAM.siteRegexPatterns}}function l(){this.backendTargetingEnabled=function(){return!0};this.cookieConsentEnabled=function(){return extole.CORE_CONFIG.isCookieConsentEnabled}}return function(t,h,g,b,d){var e=new n(t,h,g),a=new q,c=new l;this.getZone=function(){return e};this.getProgram=function(){return a};this.getCreativeData=function(){var k=
r.dotNotationToObject(r.deserialize(location.search)),p=r.dotNotationToObject(e.getParameters());return v.merge(k.extole_creative,p.creative)};this.getCoreConfig=function(){return c};this.getLocale=function(){return b||null};this.getContainer=function(){return d}}});
extole.define("find-element-by-id",["https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/logger.js"],function(r){function v(n,q,l){function t(){if(q())l();else{n();var g=setTimeout;h||(h=10);var b=500<h?500:h*=1.1;g(t,b)}}var h;t()}return function(n,q){var l=(new Date).getTime(),t=extole.MILLISECONDS_TO_WARN_WHEN_ELEMENT_NOT_FOUND||3E3,h=extole.MILLISECONDS_TO_WARN_WHEN_ELEMENT_FOUND||2E3,g=!1,b;v(function(){b=document.getElementById(n)},function(){var d=(new Date).getTime()-
l,e=!!b;e&&d>=h?r.debug("EXTOLE_ELEMENT_FOUND_SLOW: Scan duration: "+d+"ms, element id: "+n):!extole.isFindElementBeforeZoneRequest&&!g&&d>=t&&(g=!0,r.debug("EXTOLE_ELEMENT_NOT_YET_FOUND: Scan duration: "+d+"ms, element id: "+n));return e},function(){q(b)})}});extole.define("ensure-element",["find-element-by-id"],function(r){return function(v,n){v.element?n(v.element):v.element_id?r(v.element_id,n):n(document.body.appendChild(document.createElement("div")))}});
extole.define("pending-zone-service","https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/dom.js https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/type.js https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/logger.js https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/collection.js https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/client/token-store.js ZoneBrowserContext ensure-element".split(" "),
function(r,v,n,q,l,t,h){function g(a,c){c=c||function(){};var k=a.name,p=b(a.data);e(k);this.resolve=function(f,m,u,w,x){l.set(m,u);h(a,function(G){a.element=G;r.clearEventListeners(a.element);G=new t(k,p,a.element,w,x);f(G);c(null,G.getZone())})}}function b(a){a=q.merge({},a);delete a.campaign_id;delete a.extole_campaign_id;return a}var d={},e=function(){var a={};return function(c){v.isUndefined(a[c])&&(a[c]=0);a[c]++;if(5===a[c]){c="duplicate_zone_requests : "+c;var k=q.filter(extole.q.history,
function(p){return p.name&&"createZone"===p.name});k=q.map(k,function(p){delete (p.args[0]||{}).element;return p});n.warn(c,k)}}}();return{get:function(a){if(!d[a])throw Error("Pending zone does not exist for id: "+a);return d[a]},create:function(){var a=Math.floor(1E9*Math.random()),c=0;return function(k,p){c++;var f=a+"."+c;d[f]=new g(k,p);return f}}()}});
extole.define("create-zone","extole-uri-parser https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/uri.js https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/collection.js https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/dom.js https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/client/program.js https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/client/token-store.js https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/ajax.js https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/ExtoleError.js https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/logger.js pending-zone-service".split(" "),function(r,
v,n,q,l,t,h,g,b,d){var e=[];return function(a,c,k){function p(){var y={"Content-Type":"application/x-www-form-urlencoded",Accept:"text/javascript","X-Extole-App":"javascript_sdk"};u=z+"/zones/"+a.name;G&&(y["X-Extole-Jwt"]=G,delete x.jwt);D&&(y.Authorization="Bearer+"+D);B&&(y["X-Extole-Debug"]="true");var E=h.convertToFormUrlEncoded(y,x);h({url:u,type:"POST",headers:y,data:E,complete:function(H,A){var C=/^text\/html(;|$)/;A=A.getResponseHeader("Content-Type");if(/^text\/javascript(;|$)/.test(A))var F=
H;else C.test(A)?(C=document.createElement("div"),C.innerHTML=H,F=q.queryFirst("script",C).innerHTML):f(new g("Received invalid content type: '"+A+"'","invalid_content_type",null,"warn"));if(F)try{(new Function(F))()}catch(I){f(new g("Error in zone script - MESSAGE: "+I.message+" STACK: "+I.stack,"zone_script_error"))}m()},error:function(H,A){try{var C=JSON.parse(this.responseText)}catch(F){C={status:A||null,statusText:H||null}}f(new g(C.message||"Ajax zone request failed",C.code||null,C))},xhrFields:{withCredentials:!0}})}
function f(y){var E=n.merge({originalMessage:y.message,zoneRequestUrl:u||null,zoneDefinition:a},y.data);c(new g("Problem creating zone",y.code||"zone_request_failed",E,y.logLevel||"error"));m()}function m(){"function"===typeof k&&setTimeout(k,500)}c=c||function(){};var u,w=v.deserialize(location.search),x=n.merge({},a.data||a.parameters),G=a.jwt||x.jwt||w.extole_jwt,D=t.get(),z=[l.getProtocol(),l.getProgramDomain()].join(""),B=x.debug&&"false"!==x.debug||extole.IS_DEBUG_ENABLED;extole.isPassRefererInZoneData&&
(x.referer=location.href);extole.CORE_CONFIG.isGlobalZoneParametersEnabled&&(w=r.parseGlobalZoneParameters(w),x=n.merge(x,w));if(extole.createZonePrehandler&&(w=extole.createZonePrehandler(a,x),!1===w)){f(new g("Zone request cancelled","zone_request_cancelled",null,"info"));return}a.element_id&&(x.element_id=a.element_id);(function(){var y=Date.now(),E=y-6E4;e=e.filter(function(H){return H>E});60<e.length?b.warn("Zone request "+a.name+" exceeded maximum number of zone requests per minute: 60"):e.push(y);
a.data=x;x.zone_id=d.create(a,c);x=n.flatten(x);p()})()}});
extole.define("create-zone-executor",["create-zone","ensure-element","https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/logger.js","https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/common/client/token-store.js"],function(r,v,n,q){function l(a,c,k){function p(u){if(u)f(u);else{d=!0;var w=Array.prototype.slice.call(arguments);(c||function(){}).apply(null,w);m()}}function f(u){function w(){setTimeout(function(){t(a,c,k)},1)}k+=1;if(5>
k)if(h(u))d=!1,q.remove(),w();else n[u.logLevel||"error"](u.toString());else n[u.logLevel||"error"](u.toString()),n.warn("ERROR_WOULD_BE_PASSED_TO_CREATE_ZONE_CALLBACK")}var m;b.push(function(u){m=g(u);r(a,p,m);d&&m()})}function t(a,c,k){function p(){var f=!!q.get(),m=!!a.element;!extole.CORE_CONFIG.isAccessTokenIncludedInResponseEnabled&&!f||extole.isFindElementBeforeZoneRequest&&!m||l(a,c,k)}k=Number(k)||0;q.get()||extole.CORE_CONFIG.isAccessTokenIncludedInResponseEnabled||e(p);extole.isFindElementBeforeZoneRequest&&
v(a,function(f){a.element=f;p()});p()}function h(a){a=a||{};return a.data&&403===a.data.http_status_code&&("invalid_access_token"===a.code||"expired_access_token"===a.code)}function g(a){var c=!1;return function(){var k=Array.prototype.slice.call(arguments);c||(c=!0,a.apply(null,k))}}var b=new function(){var a=0,c=[],k=this,p=!1;this.push=function(f){c.push(f);this.next()};this.next=function(){function f(){a--;k.next()}if(!p)for(;1>a&&c.length;)c.shift()(f),a++};this.start=function(){p=!1;this.next()};
this.stop=function(){p=!0}},d=!1,e=function(a){function c(){for(;k.length;)k.shift().apply(null,arguments)}var k=[],p=!1;return function(f){k.push(f);p||(p=!0,a(function(){p=!1;c.apply(null,arguments)}))}}(q.fetch);return{initiateExecution:t}});
extole.define("https://origin.xtlo.net/type=core:clientId=32535:coreAssetsVersion=1544591110437/legacy-tag-scanning-service.js",[],function(){var r={};r.validators=function(){return{isEmail:function(n){n=String(n);n=n.replace(/^\s+/,"").replace(/\s+$/,"");return n.match(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i)}}}();
r.logger=function(){(function(n,q,l,t,h){n[q]=n[q]||{};for(n[q].q=n[q].q||[];h<t.length;)l(t[h++],n[q])})(window,"extole",function(n,q){q[n]=q[n]||function(){q.q.push([n,arguments])}},["log"],0);return{debug:function(n,q){window.extole.log("DEBUG",n,q)},info:function(n,q){window.extole.log("INFO",n,q)},warn:function(n,q){window.extole.log("WARN",n,q)},error:function(n,q){window.extole.log("ERROR",n,q)}}}();r["utils-collections"]=function(){function n(e,a){return Object.prototype.hasOwnProperty.call(e,
a)}function q(e){if(!t(e))return[];var a=[],c;for(c in e)n(e,c)&&a.push(c);return a}function l(e){for(var a=q(e),c=a.length,k=Array(c),p=0;p<c;p++)k[p]=e[a[p]];return k}function t(e){if("[object Object]"!==String(e)||e.nodeType||e.window&&e.window==e)return!1;try{if(e.constructor&&!Object.prototype.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(a){return!1}return!0}function h(e){return e instanceof Array}function g(e,a){var c;if(e.length===Number(e.length))for(c=0;c<e.length;c++){var k=
a(e[c],c);if(!1===k)return!1}else for(c in e)if(Object.prototype.hasOwnProperty.call(e,c)&&(k=a(e[c],c),!1===k))return!1}function b(e,a){var c=[];g(e,function(k,p){k=a(k,p);void 0!==k&&c.push(k)});return c}var d=Array.prototype.slice;g.BREAK=!1;return{each:g,map:b,mapObj:function(e,a){var c={};g(e,function(k,p){k=a(k,p);void 0!==k&&(k.key&&k.value?c[k.key]=k.value:c[p]=k)});return c},has:n,keys:q,values:l,invert:function(e){for(var a={},c=q(e),k=0,p=c.length;k<p;k++)a[e[c[k]]]=c[k];return a},toArray:function(e){return e?
h(e)?d.call(e):e.length===Number(e.length)?b(e,function(a){return a}):l(e):[]},inArray:function(e,a,c){if(a){var k=a.length;for(c=c?0>c?Math.max(0,k+c):c:0;c<k;c++)if(c in a&&a[c]===e)return c}return-1},isArray:h,isPlainObject:t}}();r.JSON=function(){var n;"object"!==typeof n&&(n={});(function(){function q(c){return 10>c?"0"+c:c}function l(c){d.lastIndex=0;return d.test(c)?'"'+c.replace(d,function(k){var p=e[k];return"string"===typeof p?p:"\\u"+("0000"+k.charCodeAt(0).toString(16)).slice(-4)})+'"':
'"'+c+'"'}function t(c,k){var p=h,f=k[c];f&&f instanceof Date&&(f=isFinite(f.valueOf())?f.getUTCFullYear()+"-"+q(f.getUTCMonth()+1)+"-"+q(f.getUTCDate())+"T"+q(f.getUTCHours())+":"+q(f.getUTCMinutes())+":"+q(f.getUTCSeconds())+"Z":null);"function"===typeof b&&(f=b.call(k,c,f));switch(typeof f){case "string":return l(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);case "object":if(!f)return"null";h+=g;var m=[];if("[object Array]"===Object.prototype.toString.apply(f)){var u=
f.length;for(c=0;c<u;c+=1)m[c]=t(c,f)||"null";k=0===m.length?"[]":h?"[\n"+h+m.join(",\n"+h)+"\n"+p+"]":"["+m.join(",")+"]";h=p;return k}if(b&&"object"===typeof b)for(u=b.length,c=0;c<u;c+=1){if("string"===typeof b[c]){var w=b[c];(k=t(w,f))&&m.push(l(w)+(h?": ":":")+k)}}else for(w in f)Object.prototype.hasOwnProperty.call(f,w)&&(k=t(w,f))&&m.push(l(w)+(h?": ":":")+k);k=0===m.length?"{}":h?"{\n"+h+m.join(",\n"+h)+"\n"+p+"}":"{"+m.join(",")+"}";h=p;return k}}var h,g,b;if("function"!==typeof n.stringify){var d=
/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;var e={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};n.stringify=function(c,k,p){var f;g=h="";if("number"===typeof p)for(f=0;f<p;f+=1)g+=" ";else"string"===typeof p&&(g=p);if((b=k)&&"function"!==typeof k&&("object"!==typeof k||"number"!==typeof k.length))throw Error("JSON.stringify");return t("",{"":c})}}if("function"!==typeof n.parse){var a=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;
n.parse=function(c,k){function p(f,m){var u,w=f[m];if(w&&"object"===typeof w)for(u in w)if(Object.prototype.hasOwnProperty.call(w,u)){var x=p(w,u);void 0!==x?w[u]=x:delete w[u]}return k.call(f,m,w)}c=String(c);a.lastIndex=0;a.test(c)&&(c=c.replace(a,function(f){return"\\u"+("0000"+f.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(c.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
"")))return c=eval("("+c+")"),"function"===typeof k?p({"":c},""):c;throw new SyntaxError("JSON.parse");}}})();return n}();r.utils=function(n,q){function l(z){return z&&"function"===typeof z&&z.call&&z.apply}function t(){q.debug.apply(null,arguments)}function h(z,B){B||(B=z,z="undefined");B=Error("TYPE: "+z+"  MESSAGE: "+B);B.type=z;return B}var g=n.each,b=n.map,d=n.mapObj,e=n.has,a=n.keys,c=n.values,k=n.invert,p=n.toArray,f=n.inArray,m=n.isArray,u=n.isPlainObject,w=0;"undefined"!==typeof window.console&&
(extole.console=extole.console||console);var x=function(){var z,B,y=arguments[0]||{},E=1,H=arguments.length,A=!1;"boolean"===typeof y&&(A=y,y=arguments[1]||{},E=2);for("object"===typeof y||l(y)||(y={});E<H;E++){var C=arguments[E];if(null!==C)for(z in C){var F=y[z];var I=C[z];y!==I&&(A&&I&&(u(I)||(B=m(I)))?(B?(B=!1,F=F&&m(F)?F:[]):F=F&&u(F)?F:{},y[z]=x(A,F,I)):void 0!==I&&(y[z]=I))}}return y};var G=Array.prototype.slice;t.debug=q.debug;t.warn=q.warn;t.info=q.info;t.error=q.error;var D=extole.generalReady;
extole.generalReady||(D=extole.generalReady=function(z){function B(E){E||D.readies[y].ready?D.readies[y].funcs.push(E):(D.readies[y].ready=!0,t.debug("** generalReady ** "+y+" - set ready"));if(D.readies[y].ready)for(;E=D.readies[y].funcs.pop();)setTimeout(E,0)}extole._generalReadyAnonKey||(extole._generalReadyAnonKey=0);var y=extole._generalReadyAnonKey++;z=x(z||{},{readyTest:void 0});D.readies[y]||(D.readies[y]={ready:!1,funcs:[]});B.unset=function(){D.readies[y].ready=!1};B.set=function(){B()};
B.isReady=function(){return D.readies[y].ready};return B},D.readies={});return{uniqueId:function(z){var B=String(++w);return z?z+B:B},each:g,map:b,mapObj:d,has:e,keys:a,values:c,invert:k,toArray:p,inArray:f,isEmpty:function(z){if(null===z)return!0;if(m(z)||"string"===typeof z)return 0===z.length;for(var B in z)if(e(z,B))return!1;return!0},isArray:m,isPlainObject:u,isFunction:l,proxy:function(z,B){if(z.__proxiedContext===B)var y=z;else y=function(){return z.apply(B,arguments)},y.__proxiedContext=B;
return y},log:t,generalReady:D,extend:x,defaults:function(z){g(G.call(arguments,1),function(B){if(B)for(var y in B)void 0===z[y]&&(z[y]=B[y])});return z},createObject:Object.create||function(z){function B(){}B.prototype=z;return new B},typedError:h,throwError:function(z,B){throw h(z,B);},handleError:function(z,B,y){y=y||function(){};try{B()}catch(E){if(E.type==z)return y(E),E;throw E;}},location:{serialize:function(z){var B="";g(z,function(y,E){void 0!==E&&void 0!==y&&(B+="&"+encodeURIComponent(E)+
"="+encodeURIComponent(String(y)))});0<B.length&&(B="?"+B.slice(1));return B},deserialize:function(z){if(!z)return{};var B={};z=z.substring(1).split("&");for(var y=0;y<z.length;y++){var E=z[y],H=E.substring(0,E.indexOf("="));E=E.substring(E.indexOf("=")+1);if(H&&E)try{B[H]=decodeURIComponent(E)}catch(A){t("Bad Query Param "+H+" : "+E)}}return B}}}}(r["utils-collections"],r.logger);r.params=function(n,q){var l={e:"email",f:"first_name",l:"last_name"},t="email first_name last_name source partner_conversion_id partner_user_id".split(" ");
return{rekey:function(h){var g={};n.each(h,function(b,d){l[d]&&(d=l[d]);var e=/^tag:/.test(d),a=-1<n.inArray(d,t);e||a||(d="tag:"+d);g[d]=b});return g},split:function(h,g){g=n.extend({validateEmail:!0},g||{});var b={init:{},client:{}};if(!h)return b;n.each(h,function(d,e){var a=b.init;-1<e.indexOf("tag:")?(e=e.substring(4),a=b.client):"email"==e&&g.validateEmail&&!q.isEmail(d)&&(n.log("Initialized with invalid email address ("+d+") - (configUtils.getInitParams)"),d=void 0);a[e]=d});return b},removeTags:function(h){var g=
{};n.each(h,function(b,d){d=d.replace(/^tag:/,"");g[d]=b});return g}}}(r.utils,r.validators);r["event-bus"]=function(){function n(){function t(b,d,e,a){if(!e)return!0;if("object"===typeof e){for(var c in e)b[d].apply(b,[c,e[c]].concat(a));return!1}if(g.test(e)){e=e.split(g);c=0;for(var k=e.length;c<k;c++)b[d].apply(b,[e[c]].concat(a));return!1}return!0}function h(b,d){var e,a=-1,c=b.length,k=d[0],p=d[1],f=d[2];switch(d.length){case 0:for(;++a<c;){(e=b[a]).callback.call(e.ctx);return}case 1:for(;++a<
c;){(e=b[a]).callback.call(e.ctx,k);return}case 2:for(;++a<c;){(e=b[a]).callback.call(e.ctx,k,p);return}case 3:for(;++a<c;){(e=b[a]).callback.call(e.ctx,k,p,f);return}default:for(;++a<c;){(e=b[a]).callback.apply(e.ctx,d);break}}}this._events={};var g=/\s+/;this.on=function(b,d,e){if(!t(this,"on",b,[d,e])||!d)return this;this._events||(this._events={});(this._events[b]||(this._events[b]=[])).push({callback:d,context:e,ctx:e||this});return this};this.off=function(b,d,e){var a,c,k,p;if(!this._events||
!t(this,"off",b,[d,e]))return this;if(!b&&!d&&!e)return this._events=void 0,this;var f=b?[b]:l.keys(this._events);var m=0;for(k=f.length;m<k;m++)if(b=f[m],c=this._events[b]){this._events[b]=a=[];if(d||e){var u=0;for(p=c.length;u<p;u++){var w=c[u];(d&&d!==w.callback&&d!==w.callback._callback||e&&e!==w.context)&&a.push(w)}}a.length||delete this._events[b]}return this};this.once=function(b,d,e){function a(){var k=q.call(arguments);d.apply(this,k);c.off(b,a,e)}var c=this;this.on(b,a,e);return this};this.trigger=
function(b){if(!this._events)return this;var d=q.call(arguments,1);if(!t(this,"trigger",b,d))return this;var e=this._events[b],a=this._events.all;e&&h(e,d);a&&h(a,arguments);return this}}var q=Array.prototype.slice,l={isPlainObject:function(t){if("[object Object]"!==String(t)||t.nodeType||t.window&&t.window==t)return!1;try{if(t.constructor&&!Object.prototype.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(h){return!1}return!0},keys:function(t){if(!this.isPlainObject(t))return[];
var h=[],g;for(g in t)Object.prototype.hasOwnProperty.call((Object.prototype,t,g))&&h.push(g);return h},_idCounter:0,uniqueId:function(t){var h=String(++this._idCounter);return t?t+h:h}};return{create:function(){return new n}}}();r["zone-event-bus"]=function(n){var q=n.create();return{publish:function(l,t,h){Array.prototype.slice.call(arguments);q.trigger("zone",l,t,h)},subscribe:function(l){q.on("zone",l)}}}(r["event-bus"]);r["zone-convert"]=function(n,q,l){function t(h){var g=h.code||"",b=h.description||
"";this.stack=Error(b).stack;this.getCode=function(){return g};this.getDescription=function(){return b}}t.prototype=Error();t.prototype.constructor=t;return function(h,g){g=g||function(){};var b=function(e){e=(e||"").toLowerCase();if("purchase"===e)var a="conversion";else if("register"===e||"registration"===e)a="registration";return a||null}(h.type),d=function(e){e=q.rekey(e);return q.removeTags(e)}(h.parameters||{});if(!b)return h="Error: could not find zone based on type:"+h.type,l.error(h),h=new t({description:h,
code:"error-no-type"}),g(h);n.publish(b,null,d)}}(r["zone-event-bus"],r.params,r.logger);r["dom-ready"]=function(n){var q=n.generalReady();(function(){var l;document.addEventListener?l=function(){document.removeEventListener("DOMContentLoaded",l,!1);q.set()}:document.attachEvent&&(l=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",l),q.set())});"complete"===document.readyState&&q.set();document.addEventListener?(document.addEventListener("DOMContentLoaded",l,
!1),window.addEventListener("load",q.set,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",l),window.attachEvent("onload",q.set))})();return q}(r.utils);r["dom-query"]=function(){return function(n,q){return(q||document).querySelectorAll(n)}}();r["page-scanner"]=function(n,q,l){function t(){function d(){a||(k=!1,a=!0,setTimeout(function(){for(var p={},f=c.splice(0,c.length);0<f.length;){var m=f.shift(),u=p[m.selector];if(!u)try{u=l(m.selector)}catch(w){n.log.error("query error -"+
m.selector)}u&&0<u.length&&m.withElements(u);m.shouldDelete()||c.push(m)}a=!1;k?d():g||(p=Math.ceil(50*(.3*Math.pow(1.017,e/50)+.7)),setTimeout(d,p),e=p)},1))}var e=0,a=!1,c=[],k=!1;this.queue=function(p){c.push(p);k=!0;a||d()};this.scan=d}function h(d){function e(){return!0}function a(){}var c=0,k=!1;this.withElements=function(p){n.each(p,function(f){e(f)&&a(f)});c++};this.setFilter=this.andIts=function(p){e=p;return this};this.setCompleted=this.thenCall=function(p){a=p;return this};this.setDeleteAfterCall=
this.andRemove=function(){k=!0};this.shouldDelete=function(){return 0<c&&!0===k?!0:!1};this.selector=d}var g=!1;q(function(){g=!0});var b=new t;return{whenYouFind:function(d){var e=new h(d);setTimeout(function(){b.queue(e)},1);return e},findAllTheThings:function(){b.scan()},reset:function(){b=new t}}}(r.utils,r["dom-ready"],r["dom-query"]);r["config-utils"]=function(n,q){return{getSharedVars:function(){for(var l=document.getElementsByTagName("script"),t={},h,g=0;g<l.length;g++)if("extole/context"==
l[g].type){h=void 0;try{h=n.parse(l[g].innerHTML)}catch(b){q.log.error("Bad JSON in context script tag.")}h&&q.extend(t,h)}return t}}}(r.JSON,r.utils);r["creative-placement"]=function(n,q){function l(g,b){"none"!==b&&(g=document.createElement("span"));return g}function t(g,b,d,e){var a=arguments,c=b.parentNode;if(!c)return q(function(){c||(document.body.appendChild(b),t.apply(null,a))}),!1;"replace"==d?(c.insertBefore(g,b),c.removeChild(b)):"before"==d?c.insertBefore(g,b):"after"==d?b.nextSibling?
c.insertBefore(g,b.nextSibling):c.appendChild(g):"inside"==d&&b.appendChild(g);e(null)}function h(g){g=n.extend({insertPosition:void 0,referenceElement:void 0},g||{});var b=g.insertPosition;g=g.referenceElement;b||(b="before","*"==g?b="inside":g&&(b="none"));return b}return{renderElement:function(g,b){var d=g.getData();d=h({insertPosition:d.insert_position,referenceElement:d.reference_element});g=g.element;var e=l(g,d);t(e,g,d,function(){b(null,e)});return e},getInsertPosition:h}}(r.utils,r["dom-ready"]);
r["zone-factory"]=function(n,q){function l(g){var b=g||{};!0!==b.__created&&(b=n.createObject(h),n.extend(b,g),t.push(b),b.__created=!0);return b}var t=[],h={elementReady:function(g){var b=this;q.renderElement(this,function(d,e){b.element=e;g&&g(d,e)})},shouldShowDefaultContent:function(){return!1},renderDefaultContent:function(){},getConfig:function(){return{}},getInsertPosition:function(){return q.getInsertPosition({insertPosition:this.data.insert_position,referenceElement:this.data.reference_element})},
getData:function(){return this.data},getType:function(){return this.type||"cta"},getName:function(){return this.name&&this.name.toLowerCase()},getParameters:function(){return n.extend({},this.data.parameters,this.data.params)},removeCampaignReferences:function(){this.data.parameters&&delete this.data.parameters.campaign_id;this.data.params&&delete this.data.params.campaign_id;this.campaign&&delete this.campaign},destroy:function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element);
for(var g=0;g<t.length&&t[g]!=this;g++);t.splice(g,1)}};n.extend(l,{getZones:function(){return t}});return l}(r.utils,r["creative-placement"]);r["zones-requester"]=function(n,q,l,t,h,g){function b(d){function e(a,c){c=c||function(){};a=a.reference_element&&"*"==a.reference_element?"body":a.reference_element?a.reference_element:!1;if(!a)return c(null,d);t.whenYouFind(a).thenCall(function(k){c(null,k)}).andRemove()}this.prepare=function(a){a=a||function(){};try{var c=n.parse(d.innerHTML)}catch(f){return a(Error("element has bad JSON, can't make zone. html: "+
d.innerHTML))}var k=(c.zone||"default").toLowerCase(),p=q.extend(!0,{},c);e(p,function(f,m){if(f)return a(f);a(null,k,{id:{}.id,element:m,data:p})})}}return new function(){function d(){a||t.whenYouFind('script[type="extole/widget"]').thenCall(function(c){c.hasBeenUsed||(c.hasBeenUsed=!0,(new b(c)).prepare(function(k,p,f){if(k)return q.log("couldn't prepare page request "+k.message);e(p,f)}))});a=!0;t.findAllTheThings()}function e(c,k){k=k||{};var p=h(q.extend({name:c,type:c},k));p.elementReady(function(f,
m){f=p.getName();var u=p.getParameters();p.campaign&&(u.campaign_id=p.campaign.id);g.publish(f,m,u)})}var a=!1;this.start=function(){d()};this.request=e}}(r.JSON,r.utils,r["dom-ready"],r["page-scanner"],r["zone-factory"],r["zone-event-bus"]);r.zones={requester:r["zones-requester"]};var v=new function(){function n(){q.whenYouFind('script[type="extole/conversion"]').thenCall(function(a){if(!a.hasBeenUsed){a.hasBeenUsed=!0;a:{var c={};try{c=t.parse(a.innerHTML)}catch(k){h.log.error("Could not fire conversion. "+
k);break a}a=c.type||c.event_type;c=h.extend(!0,{},b.getSharedVars(),c);g({type:a,parameters:c.params})}}}).andRemove();q.findAllTheThings()}var q=r["page-scanner"],l=r.zones,t=r.JSON,h=r.utils,g=r["zone-convert"],b=r["config-utils"],d=r["zone-event-bus"],e=!1;this.start=function(){if(e)throw Error("legacy-tag-scanning service has already been started");e=!0;l.requester.start();n();d.subscribe(function(a,c,k){extole.createZone({name:a,element:c,data:k})})}};v.start();return v});